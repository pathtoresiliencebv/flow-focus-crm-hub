# ğŸ‘· MONTEUR BESCHIKBAARHEID GUIDE

## ğŸ¯ HOE TE GEBRUIKEN ALS ADMIN

### **STAP 1: GA NAAR GEBRUIKERSBEHEER**

**Navigatie:**
```
Dashboard â†’ Gebruikers tab
```

Of via sidebar:
```
â˜° Menu â†’ Gebruikers
```

---

### **STAP 2: SELECTEER EEN MONTEUR**

**In de gebruikerslijst:**
```
1. Zoek de monteur (bijv. "Gregory")
2. Klik op de rij van de monteur
   OF
3. Klik op "..." acties menu â†’ "Beschikbaarheid"
```

---

### **STAP 3: BESCHIKBAARHEID DIALOG OPENT**

**Je ziet nu een dialog met 2 tabs:**

**Tab 1: ğŸ“… WEEKSCHEMA**
```
Standaard werkuren per dag instellen
```

**Tab 2: ğŸ–ï¸ VRIJE DAGEN**
```
Vakantie, ziek, verlof registreren
```

---

## ğŸ“… TAB 1: WEEKSCHEMA INSTELLEN

### **OPTIE A: STANDAARD WERKWEEK TOEVOEGEN**

**1. Klik op knop: "Standaard Werkweek Toevoegen"**
```
Dit voegt automatisch toe:
â”œâ”€ Maandag:    08:00 - 17:00 (pauze 12:00-13:00)
â”œâ”€ Dinsdag:    08:00 - 17:00 (pauze 12:00-13:00)
â”œâ”€ Woensdag:   08:00 - 17:00 (pauze 12:00-13:00)
â”œâ”€ Donderdag:  08:00 - 17:00 (pauze 12:00-13:00)
â””â”€ Vrijdag:    08:00 - 17:00 (pauze 12:00-13:00)
```

**2. Succes melding:**
```
âœ… Standaard werkweek toegevoegd
   Ma-Vr, 08:00-17:00 met 1 uur pauze
```

---

### **OPTIE B: HANDMATIG PER DAG INSTELLEN**

**Voor elke dag kun je instellen:**

**Maandag (voorbeeld):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… Maandag                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ Beschikbaar                       â”‚
â”‚                                     â”‚
â”‚ Start tijd:    [08:00] â°           â”‚
â”‚ Eind tijd:     [17:00] â°           â”‚
â”‚                                     â”‚
â”‚ Pauze start:   [12:00] â˜•           â”‚
â”‚ Pauze eind:    [13:00] â˜•           â”‚
â”‚                                     â”‚
â”‚ Notities:      [_______________]    â”‚
â”‚                                     â”‚
â”‚ [ğŸ’¾ Opslaan] [ğŸ—‘ï¸ Verwijder]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Velden uitleg:**

| Veld | Betekenis | Voorbeeld |
|------|-----------|-----------|
| **â˜‘ Beschikbaar** | Monteur werkt deze dag | Aan = Ja, Uit = Vrij |
| **Start tijd** | Begin werkdag | 08:00 |
| **Eind tijd** | Einde werkdag | 17:00 |
| **Pauze start** | Begin lunchpauze | 12:00 |
| **Pauze eind** | Einde lunchpauze | 13:00 |
| **Notities** | Extra info | "Alleen 's ochtends" |

---

### **VOORBEELDEN WERKSCHEMA'S:**

#### **Voorbeeld 1: Voltijd (Ma-Vr)**
```
Maandag:    â˜‘ 08:00 - 17:00 (pauze 12:00-13:00)
Dinsdag:    â˜‘ 08:00 - 17:00 (pauze 12:00-13:00)
Woensdag:   â˜‘ 08:00 - 17:00 (pauze 12:00-13:00)
Donderdag:  â˜‘ 08:00 - 17:00 (pauze 12:00-13:00)
Vrijdag:    â˜‘ 08:00 - 17:00 (pauze 12:00-13:00)
Zaterdag:   â˜ (niet beschikbaar)
Zondag:     â˜ (niet beschikbaar)

Totaal: 40 uur/week (exclusief pauzes: 35 uur)
```

#### **Voorbeeld 2: Parttime (Ma-Wo-Vr)**
```
Maandag:    â˜‘ 08:00 - 17:00
Dinsdag:    â˜ (vrije dag)
Woensdag:   â˜‘ 08:00 - 17:00
Donderdag:  â˜ (vrije dag)
Vrijdag:    â˜‘ 08:00 - 17:00
Zaterdag:   â˜
Zondag:     â˜

Totaal: 24 uur/week (exclusief pauzes: 21 uur)
```

#### **Voorbeeld 3: Vroege Shift**
```
Maandag:    â˜‘ 06:00 - 15:00 (pauze 11:00-11:30)
Dinsdag:    â˜‘ 06:00 - 15:00 (pauze 11:00-11:30)
Woensdag:   â˜‘ 06:00 - 15:00 (pauze 11:00-11:30)
Donderdag:  â˜‘ 06:00 - 15:00 (pauze 11:00-11:30)
Vrijdag:    â˜‘ 06:00 - 15:00 (pauze 11:00-11:30)

Totaal: 40 uur/week (exclusief pauzes: 37.5 uur)
```

#### **Voorbeeld 4: Weekend Monteur**
```
Maandag:    â˜ (vrij)
Dinsdag:    â˜ (vrij)
Woensdag:   â˜ (vrij)
Donderdag:  â˜ (vrij)
Vrijdag:    â˜ (vrij)
Zaterdag:   â˜‘ 08:00 - 18:00 (pauze 13:00-14:00)
Zondag:     â˜‘ 08:00 - 18:00 (pauze 13:00-14:00)

Totaal: 18 uur/weekend (exclusief pauzes: 16 uur)
```

---

## ğŸ–ï¸ TAB 2: VRIJE DAGEN / VERLOF

### **VERLOF AANVRAGEN TOEVOEGEN**

**1. Klik op: "+ Verlof Toevoegen"**

**2. Vul formulier in:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Verlof Aanvraag                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Type:        [Vakantie â–¼]           â”‚
â”‚              - Vakantie             â”‚
â”‚              - Ziek                 â”‚
â”‚              - Persoonlijk          â”‚
â”‚              - Anders               â”‚
â”‚                                     â”‚
â”‚ Start datum: [ğŸ“… 01-02-2025]        â”‚
â”‚ Eind datum:  [ğŸ“… 07-02-2025]        â”‚
â”‚                                     â”‚
â”‚ Reden:       [Familie vakantie]    â”‚
â”‚                                     â”‚
â”‚ Status:      [Goedgekeurd â–¼]       â”‚
â”‚              - In behandeling       â”‚
â”‚              - Goedgekeurd          â”‚
â”‚              - Afgewezen            â”‚
â”‚                                     â”‚
â”‚ [ğŸ’¾ Opslaan] [âŒ Annuleren]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**3. Verlof wordt toegevoegd aan lijst**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ–ï¸ Vakantie                                 â”‚
â”‚ 01-02-2025 t/m 07-02-2025 (7 dagen)        â”‚
â”‚ Status: âœ… Goedgekeurd                      â”‚
â”‚ Reden: Familie vakantie                    â”‚
â”‚ [âœï¸ Bewerk] [ğŸ—‘ï¸ Verwijder]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ HOE WERKT HET IN DE PLANNING?

### **PLANNING SUGGESTIES**

Wanneer admin planning maakt, kan het systeem:

**1. Toon beschikbare monteurs:**
```
Voor 15 januari 2025, 10:00-17:00:

âœ… Jan Smans    - Beschikbaar (08:00-17:00)
âœ… Piet de Vries - Beschikbaar (08:00-17:00)
âš ï¸ Kees Jansen  - Beperkt beschikbaar (14:00-17:00)
âŒ Henk Bakker  - Niet beschikbaar (Vakantie)
```

**2. Conflict waarschuwingen:**
```
âš ï¸ Let op: Jan Smans heeft al 2 planningen op deze dag
âš ï¸ Let op: Dit is buiten de werkuren van Piet (na 17:00)
âŒ Fout: Henk Bakker heeft verlof op deze datum
```

**3. Optimale suggesties:**
```
ğŸ’¡ Suggestie: Piet de Vries is ideaal (geen conflicten)
ğŸ’¡ Suggestie: Kees Jansen heeft nog 4 uur beschikbaar
```

---

## ğŸ’¾ DATABASE STRUCTUUR

### **user_availability Table:**
```sql
CREATE TABLE user_availability (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users,
  day_of_week INTEGER, -- 0=Zondag, 1=Maandag, ... 6=Zaterdag
  start_time TIME,     -- Bijv. '08:00:00'
  end_time TIME,       -- Bijv. '17:00:00'
  is_available BOOLEAN DEFAULT true,
  break_start_time TIME, -- Bijv. '12:00:00'
  break_end_time TIME,   -- Bijv. '13:00:00'
  notes TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);
```

### **user_time_off Table:**
```sql
CREATE TABLE user_time_off (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users,
  start_date DATE,
  end_date DATE,
  type VARCHAR(20), -- 'vacation', 'sick', 'personal', 'other'
  reason TEXT,
  status VARCHAR(20), -- 'pending', 'approved', 'rejected'
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);
```

---

## âœ¨ FEATURES

### **VOOR ADMIN:**
âœ… **Weekschema beheer**
  - Instellen werkuren per dag
  - Pauzetijden configureren
  - On/Off schakelaar per dag
  - Notities per dag

âœ… **Verlofbeheer**
  - Vakantie registreren
  - Ziekteverlof bijhouden
  - Persoonlijk verlof
  - Goedkeuren/Afwijzen

âœ… **Standaard templates**
  - Voltijd werkweek (40u)
  - Parttime opties
  - Weekend shifts
  - Custom schema's

âœ… **Overzicht & Rapportage**
  - Totaal uren per week
  - Beschikbaarheid per monteur
  - Verlof overzicht
  - Conflict detectie

### **VOOR MONTEUR (toekomst):**
â³ Eigen beschikbaarheid bekijken
â³ Verlof aanvragen (admin keurt goed)
â³ Beschikbaarheid update (admin keurt goed)
â³ Notificaties bij wijzigingen

---

## ğŸš€ HOE TE ACTIVEREN

### **STAP 1: Check of tabel bestaat**

```sql
-- Check user_availability
SELECT * FROM user_availability LIMIT 1;

-- Check user_time_off
SELECT * FROM user_time_off LIMIT 1;
```

### **STAP 2: Ga naar Gebruikersbeheer**

```
Dashboard â†’ Gebruikers tab
```

### **STAP 3: Selecteer monteur**

```
Klik op monteur â†’ "..." menu â†’ Beschikbaarheid
```

### **STAP 4: Voeg standaard werkweek toe**

```
Klik: "Standaard Werkweek Toevoegen"
```

### **STAP 5: Pas aan indien nodig**

```
Wijzig uren per dag
Toggle aan/uit
Voeg pauzes toe
Save
```

---

## ğŸ“Š GEBRUIK IN PLANNING

### **Wanneer je planning maakt:**

**Planning Scherm:**
```
1. Klik op datum in kalender
2. Sidebar: "Te plannen projecten"
3. Selecteer project
4. Selecteer monteur â† HIER ZIE JE BESCHIKBAARHEID!
```

**Monteur Dropdown:**
```
[Select Monteur â–¼]
â”œâ”€ Jan Smans âœ… (Beschikbaar 08:00-17:00)
â”œâ”€ Piet de Vries âš ï¸ (Beperkt: 14:00-17:00)
â””â”€ Henk Bakker âŒ (Vakantie t/m 15-01)
```

**Waarschuwing bij conflict:**
```
âš ï¸ Waarschuwing:
Deze tijd valt buiten de werkuren van Jan Smans.
Werkuren: 08:00 - 17:00
Gepland: 07:00 - 18:00

[Toch Plannen] [Tijd Aanpassen]
```

---

## ğŸ’¡ TIPS & BEST PRACTICES

### **1. Stel beschikbaarheid in bij onboarding**
```
Nieuwe monteur â†’ Direct beschikbaarheid instellen
```

### **2. Update bij contractwijzigingen**
```
Parttime â†’ Voltijd: Update werkdagen
Shift change: Update uren
```

### **3. Plan verlof vooruit**
```
Vakantie bekend? â†’ Direct in systeem
Team weet van tevoren wie afwezig is
```

### **4. Check beschikbaarheid voor planning**
```
Voor planning maken:
1. Check monteur beschikbaarheid
2. Check bestaande planningen
3. Check verlof
4. Plan optimaal
```

### **5. Gebruik notities**
```
"Alleen 's ochtends beschikbaar"
"Bij voorkeur niet op vrijdag"
"Rijbewijs B verplicht"
```

---

## ğŸ” CONFLICT DETECTIE (Toekomst)

### **Automatische Checks:**

**Bij planning maken:**
```
âœ… Is monteur beschikbaar op deze dag?
âœ… Valt tijd binnen werkuren?
âœ… Geen verlof op deze datum?
âœ… Geen overlap met andere planningen?
âœ… Genoeg reistijd tussen projecten?
```

**Waarschuwingen:**
```
âš ï¸ Soft conflict: Buiten normale werkuren
âŒ Hard conflict: Verlof of niet beschikbaar
ğŸ’¡ Suggestie: Alternatieve monteur of tijd
```

---

## ğŸ¯ SAMENVATTING

### **HOE GEBRUIK JE HET?**

**Als Admin:**
```
1. Dashboard â†’ Gebruikers
2. Klik monteur â†’ Beschikbaarheid
3. Tab 1: Weekschema instellen
   â””â”€ Optie: "Standaard Werkweek" knop
   â””â”€ Of: Handmatig per dag
4. Tab 2: Verlof toevoegen
   â””â”€ Vakantie, ziek, etc.
5. Save & Klaar!
```

**Bij Planning Maken:**
```
1. Planning tab â†’ Datum kiezen
2. Monteur selecteren
3. Systeem toont beschikbaarheid
4. Waarschuwing bij conflict
5. Plan project
```

**Voordelen:**
```
âœ… Geen planning buiten werkuren
âœ… Geen planning tijdens verlof
âœ… Betere workload spreiding
âœ… Minder conflicten
âœ… Hogere tevredenheid monteurs
```

---

## ğŸš¨ TROUBLESHOOTING

### **"Ik zie geen Beschikbaarheid optie"**
```
Check:
â”œâ”€ Ben je Administrator?
â”œâ”€ Is gebruiker een Installateur?
â””â”€ Update pagina

Fix:
â†’ Zorg dat je admin rechten hebt
```

### **"Standaard werkweek knop werkt niet"**
```
Check:
â”œâ”€ Is er al een schema voor deze monteur?
â””â”€ Verwijder bestaand schema eerst

Fix:
â†’ Verwijder oude schema eerst
â†’ Dan pas "Standaard Werkweek"
```

### **"Planning valideert niet op beschikbaarheid"**
```
Dit is TOEKOMSTIGE feature:
â³ Automatische validatie komt nog

Nu:
â†’ Handmatig checken beschikbaarheid
â†’ Check weekschema monteur
```

---

**ğŸŠ NU WEET JE HOE MONTEUR BESCHIKBAARHEID WERKT! ğŸŠ**

**Vragen?**
- Check PLANNING_WORKFLOW_GUIDE.md
- Check deze guide
- Test met een monteur account

**Laatste Update:** 8 januari 2025  
**Versie:** 1.0  
**Contact:** SMANS BV Development Team

